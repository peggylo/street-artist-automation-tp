# 台北街頭藝人場地申請自動化系統 PRD

## 🎯 專案概述

### 目標與使用者
為視障街頭藝人(媽媽)開發自動化場地申請系統，解決每月固定申請台北市大安森林公園展演時段的需求。媽媽透過熟悉的 LINE 介面提出申請，系統自動處理複雜的網站操作流程。

**申請時間規則：**
* 第一梯次：每月1-3日17:00止，申請當月下半月時段
* 第二梯次：每月21-22日17:00止，申請次月上半月時段

## 🎯 功能需求

### 功能規格
* **LINE 申請介面**：媽媽透過 LINE 發送簡單申請訊息（「我要申請」、「申請」、「我想申請」），系統自動啟動申請流程
* **LINE 群組支援**：LINE Bot 可被加入群組，支援多人共同參與申請流程與結果通知
* **自動網站操作**：系統自動登入台北市街頭藝人申請網站，選擇大安森林公園2號出口，填寫表演項目為「唱歌、跳舞、助盲」
* **申請記錄管理**：所有申請需求與結果記錄在 Google Sheets，包含申請時間、需求內容、處理狀態、最終結果
* **結果通知回報**：申請完成後自動截圖並上傳 Google Drive，系統自動將結果通知與截圖連結發送到原始申請的聊天室（群組或個人）


### 關鍵交互設計
* **極簡設計**：僅需三個關鍵字觸發申請流程，無需額外輸入
* **Config 配置**：場地出口選項可透過設定檔調整（預設：2號出口）

### 錯誤處理機制
* **申請失敗處理**：系統截圖錯誤頁面，在 Google Sheets 記錄詳細失敗原因與技術細節，LINE 通知失敗並提供 Google Sheets 連結
* **網站無法訪問**：當網站維護或無法訪問時，在 Google Sheets 記錄錯誤狀態，LINE 通知申請失敗並提供 Google Sheets 連結
* **自動化失敗**：系統異常時記錄詳細錯誤日誌到 Google Sheets，LINE 群組通知失敗並提供 Google Sheets 連結，由人工接手處理
* **失敗分類**：區分網站問題與申請被拒絕等不同失敗類型，但保持分類簡單明確
* **自動重試機制**：網路暫時性問題時自動重試 3 次，間隔 30 秒，避免因短暫網路問題導致申請失敗

## 🔄 用戶流程

### 主要操作流程
1. **提出申請**：媽媽在 LINE 群組發送申請訊息(例：「申請」或「我要申請」)
2. **時間窗口檢查**：系統檢查當前是否在申請時間窗口內
   - 申請期間內：確認收到申請，記錄到 Google Sheets，啟動自動申請流程
   - 非申請期間：回覆「⏰ 現在不是申請時間\n\n申請時間為每月1-3日17:00止、每月21-22日17:00止。」
3. **自動處理**：系統自動執行網站申請流程（大安森林公園2號出口，申請所有可用週末與假日時段）
4. **結果通知**：系統自動將結果發送到原始申請的聊天室
   - 成功：發送「✅ 登記完成！」訊息，包含具體登記時段詳情（日期 + 時段：早上/下午/晚上）並直接傳送申請完成畫面截圖
   - 失敗：發送「❌ 登記失敗！」訊息並提供 Google Sheets 連結查看詳細資訊


## 🚀 未來優化事項

以下功能將在後續版本中考慮實作：

* **抽籤結果自動通知**：主辦方抽籤完畢後，自動檢查並通知抽籤結果
* **部分申請結果處理**：當部分時段申請成功、部分失敗時，提供更詳細的結果通知

---

**版本**: v1.0 | **更新**: 2025-09-20